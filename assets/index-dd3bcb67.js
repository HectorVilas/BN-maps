(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const n of e.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function o(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(t){if(t.ep)return;t.ep=!0;const e=o(t);fetch(t.href,e)}})();async function d(c){const o=await(await fetch(c)).json(),r={width:o[0].object.rows[0].length,height:o[0].object.rows.length,floors:[]},t=[];return o.forEach(e=>{t.includes(e.om_terrain)||t.push(e.om_terrain)}),t.forEach(()=>r.floors.push([])),o.forEach(e=>{const n=t.indexOf(e.om_terrain);r.floors[n].push(e)}),r}async function u(c,s,o){const r=await d(c),t=document.querySelector("#map-viewer");t.replaceChildren();for(let e=0;e<r.height;e+=1){const n=document.createElement("div");n.classList.add("row");for(let a=0;a<r.width;a+=1){const i=document.createElement("div");i.classList.add("tile"),i.dataset.x=a,i.dataset.y=e,i.textContent=`${r.floors[s][o].object.rows[e][a]}`,n.append(i)}t.append(n)}}function l(){const c=document.createElement("section"),s=document.createElement("div");s.setAttribute("id","map-viewer");const o=[];return["floor","variant"].forEach(t=>{const e=document.createElement("input");e.type="number",e.min=0,e.max=3,e.value=0,e.classList.add(t),e.addEventListener("change",()=>{const n=document.querySelector(".floor"),a=document.querySelector(".variant");u("./json/mapgen/house/2storymodern01.json",n.value,a.value)}),o.push(e)}),c.append(s,...o),c}u("./json/mapgen/house/2storymodern01.json",0,0);const p=document.querySelector("#app");p.append(l());
