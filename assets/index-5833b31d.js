(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();async function f(l){const s=await(await fetch(l)).json(),o={floors:[]},e=[];return s.forEach(t=>{e.includes(t.om_terrain)||e.push(t.om_terrain)}),e.forEach(()=>o.floors.push([])),s.forEach(t=>{const c=e.indexOf(t.om_terrain);o.floors[c].push(t)}),o}function m(l,r,s){const o=document.createElement("div"),e=l.floors[r][s],t=e.object.rows[0].length,c=e.object.rows.length;for(let d=0;d<c;d+=1){const p=document.createElement("div");p.classList.add("row");for(let a=0;a<t;a+=1){const i=document.createElement("div");i.classList.add("tile"),i.dataset.x=a,i.dataset.y=d,i.textContent=`${e.object.rows[d][a]}`,p.append(i)}o.append(p)}return o}const n={blueprint:[],floor:0,variant:0};async function h(l){n.blueprint=await f(l);const r=document.createElement("button");r.textContent="Back to list",r.addEventListener("click",()=>{window.location.reload()});const s=document.createElement("section"),o=document.createElement("div");o.id="map-viewer";const e=document.createElement("div");return e.id="map-floors",n.blueprint.floors.forEach((t,c)=>{const d=document.createElement("div");d.classList.add("floor-btn-div");const p=t[0].om_terrain,a=document.createElement("button");if(a.classList.add("floor-btn"),a.textContent=`${typeof p=="string"?p:`[${p.toString().split(",").join("] [")}]`}`,a.textContent.includes("_roof")&&a.classList.add("roof"),a.textContent.includes("_basement")&&a.classList.add("basement"),a.addEventListener("click",()=>{n.floor=c,n.variant=0,o.replaceChildren(m(n.blueprint,n.floor,n.variant))}),d.append(a),t.length>1){const i=document.createElement("button");i.classList.add("floor-btn-next"),i.textContent=">";const u=document.createElement("button");u.classList.add("floor-btn-prev"),u.textContent="<",i.addEventListener("click",()=>{n.floor!==c&&(n.variant=0),n.floor=c,n.variant+=1,t[n.variant]||(n.variant=0),o.replaceChildren(m(n.blueprint,n.floor,n.variant))}),u.addEventListener("click",()=>{n.floor=c,n.variant-=1,t[n.variant]||(n.variant=t.length-1),o.replaceChildren(m(n.blueprint,n.floor,n.variant))}),d.append(i,u)}e.append(d)}),o.append(m(n.blueprint,n.floor,n.variant)),s.append(r,o,e),s}const v=document.querySelector("#app");function b(){const l=document.createElement("main"),r=document.createElement("h1");r.textContent="BN Maps";const s=document.createElement("ul");return["./json/mapgen/house/2storymodern01.json","./json/mapgen/house/bungalow01.json","./json/mapgen/house/garden_house_1.json","./json/mapgen/house/house_garage_prepper.json","./json/mapgen/house/urban_1_house.json"].forEach(e=>{const t=document.createElement("li");t.textContent=e.split("/").at(-1).split(".json").at(0),t.addEventListener("click",async()=>{v.replaceChildren(await h(e))}),s.append(t)}),l.append(r,s),l}const g=document.querySelector("#app");g.append(b());
