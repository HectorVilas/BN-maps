(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}})();async function p(a){const n=await(await fetch(a)).json(),r={width:n[0].object.rows[0].length,height:n[0].object.rows.length,floors:[]},e=[];return n.forEach(t=>{e.includes(t.om_terrain)||e.push(t.om_terrain)}),e.forEach(()=>r.floors.push([])),n.forEach(t=>{const o=e.indexOf(t.om_terrain);r.floors[o].push(t)}),r}async function u(a,s,n){const r=await p(a),e=document.querySelector("#map-viewer");e.replaceChildren();for(let t=0;t<r.height;t+=1){const o=document.createElement("div");o.classList.add("row");for(let i=0;i<r.width;i+=1){const c=document.createElement("div");c.classList.add("tile"),c.dataset.x=i,c.dataset.y=t,c.textContent=`${r.floors[s][n].object.rows[t][i]}`,o.append(c)}e.append(o)}}function d(a){const s=document.createElement("section"),n=document.createElement("div");n.setAttribute("id","map-viewer");const r=[];return["floor","variant"].forEach(t=>{const o=document.createElement("input");o.type="number",o.min=0,o.max=3,o.value=0,o.classList.add(t),o.addEventListener("change",()=>{const i=document.querySelector(".floor"),c=document.querySelector(".variant");u(a,i.value,c.value)}),r.push(o)}),s.append(n,...r),s}function l(){const a=document.createElement("main"),s=document.createElement("h1");s.textContent="BN Maps";const n=document.createElement("ul");return["./json/mapgen/house/2storymodern01.json","./json/mapgen/house/bungalow01.json","./json/mapgen/house/garden_house_1.json","./json/mapgen/house/house_garage_prepper.json","./json/mapgen/house/urban_1_house.json"].forEach(e=>{const t=document.createElement("li");t.textContent=e.split("/").at(-1).split(".json").at(0),t.addEventListener("click",()=>{document.querySelector("#app").replaceChildren(d(e)),u(e,0,0)}),n.append(t)}),a.append(s,n),a}const m=document.querySelector("#app");m.append(l());
