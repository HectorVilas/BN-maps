(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}})();async function m(s){const n=await(await fetch(s)).json(),o={floors:[]},e=[];return n.forEach(t=>{e.includes(t.om_terrain)||e.push(t.om_terrain)}),e.forEach(()=>o.floors.push([])),n.forEach(t=>{const a=e.indexOf(t.om_terrain);o.floors[a].push(t)}),o}function u(s,r,n){const o=document.createElement("div"),e=s.floors[r][n],t=e.object.rows[0].length,a=e.object.rows.length;for(let i=0;i<a;i+=1){const d=document.createElement("div");d.classList.add("row");for(let l=0;l<t;l+=1){const p=document.createElement("div");p.classList.add("tile"),p.dataset.x=l,p.dataset.y=i,p.textContent=`${e.object.rows[i][l]}`,d.append(p)}o.append(d)}return o}const c={blueprint:[],floor:0,variant:0};async function f(s){c.blueprint=await m(s);const r=document.createElement("section"),n=document.createElement("div");n.id="map-viewer";const o=document.createElement("div");return o.id="map-floors",c.blueprint.floors.forEach((e,t)=>{const a=document.createElement("div"),i=e[0].om_terrain,d=document.createElement("button");if(d.textContent=`${typeof i=="string"?i:i.toString().split(",").join(" + ")}`,d.addEventListener("click",()=>{c.floor=t,n.replaceChildren(u(c.blueprint,c.floor,c.variant))}),a.append(d),e.length>1){const l=document.createElement("button");l.textContent=">";const p=document.createElement("button");p.textContent="<",a.append(l,p)}o.append(a)}),n.append(u(c.blueprint,c.floor,c.variant)),r.append(n,o),r}const h=document.querySelector("#app");function g(){const s=document.createElement("main"),r=document.createElement("h1");r.textContent="BN Maps";const n=document.createElement("ul");return["./json/mapgen/house/2storymodern01.json","./json/mapgen/house/bungalow01.json","./json/mapgen/house/garden_house_1.json","./json/mapgen/house/house_garage_prepper.json","./json/mapgen/house/urban_1_house.json"].forEach(e=>{const t=document.createElement("li");t.textContent=e.split("/").at(-1).split(".json").at(0),t.addEventListener("click",async()=>{h.replaceChildren(await f(e))}),n.append(t)}),s.append(r,n),s}const E=document.querySelector("#app");E.append(g());
