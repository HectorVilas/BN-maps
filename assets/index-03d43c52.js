(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(t){if(t.ep)return;t.ep=!0;const e=r(t);fetch(t.href,e)}})();async function u(c){const r=await(await fetch(c)).json(),n={width:r[0].object.rows[0].length,height:r[0].object.rows.length,floors:[]},t=[];return r.forEach(e=>{t.includes(e.om_terrain)||t.push(e.om_terrain)}),t.forEach(()=>n.floors.push([])),r.forEach(e=>{const o=t.indexOf(e.om_terrain);n.floors[o].push(e)}),n}async function d(c,s,r){const n=await u(c),t=document.querySelector("#map-viewer");t.replaceChildren();for(let e=0;e<n.height;e+=1){const o=document.createElement("div");o.classList.add("row");for(let i=0;i<n.width;i+=1){const a=document.createElement("div");a.classList.add("tile"),a.dataset.x=i,a.dataset.y=e,a.textContent=`${n.floors[s][r].object.rows[e][i]}`,o.append(a)}t.append(o)}}function l(){const c=document.createElement("section"),s=document.createElement("div");s.setAttribute("id","map-viewer");const r=document.createElement("button");r.textContent="load map",r.addEventListener("click",()=>{const e=document.querySelector(".floor"),o=document.querySelector(".variant");d("./json/mapgen/house/2storymodern01.json",e.value,o.value)});const n=[];return["floor","variant"].forEach(e=>{const o=document.createElement("input");o.type="number",o.min=0,o.max=10,o.value=0,o.classList.add(e),n.push(o)}),c.append(s,r,...n),c}const p=document.querySelector("#app");p.append(l());
