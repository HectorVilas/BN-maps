(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}})();async function f(i){const a=await(await fetch(i)).json(),o={floors:[]},e=[];return a.forEach(t=>{e.includes(t.om_terrain)||e.push(t.om_terrain)}),e.forEach(()=>o.floors.push([])),a.forEach(t=>{const s=e.indexOf(t.om_terrain);o.floors[s].push(t)}),o}function m(i,r,a){const o=document.createElement("div"),e=i.floors[r][a],t=e.object.rows[0].length,s=e.object.rows.length;for(let l=0;l<s;l+=1){const p=document.createElement("div");p.classList.add("row");for(let d=0;d<t;d+=1){const c=document.createElement("div");c.classList.add("tile"),c.dataset.x=d,c.dataset.y=l,c.textContent=`${e.object.rows[l][d]}`,p.append(c)}o.append(p)}return o}const n={blueprint:[],floor:0,variant:0};async function h(i){n.blueprint=await f(i);const r=document.createElement("button");r.textContent="Back to list",r.addEventListener("click",()=>{window.location.reload()});const a=document.createElement("section"),o=document.createElement("div");o.id="map-viewer";const e=document.createElement("div");return e.id="map-floors",n.blueprint.floors.forEach((t,s)=>{const l=document.createElement("div");l.classList.add("floor-btn-div");const p=t[0].om_terrain,d=document.createElement("button");if(d.classList.add("floor-btn"),d.textContent=`${typeof p=="string"?p:`[${p.toString().split(",").join("] [")}]`}`,d.addEventListener("click",()=>{n.floor=s,n.variant=0,o.replaceChildren(m(n.blueprint,n.floor,n.variant))}),l.append(d),t.length>1){const c=document.createElement("button");c.classList.add("floor-btn-next"),c.textContent=">";const u=document.createElement("button");u.classList.add("floor-btn-prev"),u.textContent="<",c.addEventListener("click",()=>{n.floor!==s&&(n.variant=0),n.floor=s,n.variant+=1,t[n.variant]||(n.variant=0),o.replaceChildren(m(n.blueprint,n.floor,n.variant))}),u.addEventListener("click",()=>{n.floor=s,n.variant-=1,t[n.variant]||(n.variant=t.length-1),o.replaceChildren(m(n.blueprint,n.floor,n.variant))}),l.append(c,u)}e.append(l)}),o.append(m(n.blueprint,n.floor,n.variant)),a.append(r,o,e),a}const v=document.querySelector("#app");function g(){const i=document.createElement("main"),r=document.createElement("h1");r.textContent="BN Maps";const a=document.createElement("ul");return["./json/mapgen/house/2storymodern01.json","./json/mapgen/house/bungalow01.json","./json/mapgen/house/garden_house_1.json","./json/mapgen/house/house_garage_prepper.json","./json/mapgen/house/urban_1_house.json"].forEach(e=>{const t=document.createElement("li");t.textContent=e.split("/").at(-1).split(".json").at(0),t.addEventListener("click",async()=>{v.replaceChildren(await h(e))}),a.append(t)}),i.append(r,a),i}const b=document.querySelector("#app");b.append(g());
